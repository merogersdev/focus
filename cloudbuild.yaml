steps:
  - name: "gcr.io/cloud-builders/docker"
    args:
      [
        "build",
        "-t",
        "${_LOCATION}-docker.pkg.dev/$PROJECT_ID/${_REPOSITORY}/${_IMAGE}",
        ".",
      ]
  - name: "gcr.io/cloud-builders/gcloud"
    script: |
      gcloud run deploy cloudrunservice --image ${_LOCATION}-docker.pkg.dev/$PROJECT_ID/${_REPOSITORY}/${_IMAGE} --region ${_LOCATION} --platform managed --allow-unauthenticated
images:
  - "${_LOCATION}-docker.pkg.dev/$PROJECT_ID/${_REPOSITORY}/${_IMAGE}"
options:
  logging: CLOUD_LOGGING_ONLY
timeout: 2400s
